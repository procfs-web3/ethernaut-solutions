// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.6.0;

import "forge-std/Test.sol";
import "src/Contract.sol";
import "src/Exploit.sol";

contract ExploitTest is Test {

    Exploit exploit;
    ICoinFlip coin;
    
    function setUp() public {
        CoinFlip _coin = new CoinFlip();
        coin = ICoinFlip(address(_coin));
        exploit = new Exploit(address(coin));
    }

    function testExploit() public {
        for (uint i = 0; i < 100; i++) {
            assertEq(exploit.fire(), true, "failed to guess");
            vm.roll(block.number + i + 1);
        }
        
    }
}